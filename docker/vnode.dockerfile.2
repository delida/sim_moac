FROM frolvlad/alpine-glibc:alpine-3.8_glibc-2.28
MAINTAINER "Yifan Wang <yifan.wang@moac.io>"

ARG version

RUN mkdir /vnode
RUN mkdir /vnode/keystore
RUN mkdir /vnode/config
RUN mkdir /vnode/data

# install moac vnode
COPY config/vnode/vnode.genesis.json /vnode/genesis.json
COPY bin/$version/vnode/moac /usr/local/sbin/
COPY bin/tools/wait-for-it.sh  /usr/local/sbin/
COPY bin/tools/disable_network.sh /usr/local/sbin/
COPY bin/tools/resume_network.sh /usr/local/sbin/

COPY config/vnode/0.bootnode.key /vnode/0.bootnode.key
COPY config/vnode/1.bootnode.key /vnode/1.bootnode.key
COPY config/vnode/2.bootnode.key /vnode/2.bootnode.key


WORKDIR /vnode
VOLUME /vnode

CMD ["echo", "This is moac vnode."]

# rpc port
EXPOSE 8545
EXPOSE 50062
