version: '3.1'

services:
  redis_db:
    image: redis:4.0.11
    deploy:
      mode: global
      restart_policy:
        condition: any
        delay: 5s
        # max_attempts: default to be never give up
        window: 60s
  scs_server:
    image: heavenstar/moac:scs
    command: scsserver
    deploy:
      mode: global
      restart_policy:
        condition: any
        delay: 5s
        window: 60s
  vnode_server:
    image: heavenstar/moac:vnode
    deploy:
      mode: global
      restart_policy:
        condition: any
        window: 60s
